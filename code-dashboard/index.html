<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Code Analysis Dashboard</title>
    <link rel="stylesheet" href="/shared-theme/theme.css">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="dashboard-wrapper">
        <!-- Header with Tabs -->
        <header class="dashboard-top-header">
            <div class="header-title">
                <h1>üíª Code Analysis Dashboard</h1>
            </div>

            <!-- Main Tab Navigation -->
            <nav class="tab-nav">
                <button class="tab-btn active" data-tab="overview">üìä Overview</button>
                <button class="tab-btn" data-tab="backend">üî∑ Backend (.NET)</button>
                <button class="tab-btn" data-tab="frontend">üü® Frontend (JS)</button>
                <button class="tab-btn" data-tab="test-gaps">üîç Test Gaps</button>
            </nav>
        </header>

        <!-- Filter Bar -->
        <div class="filter-bar-wrapper">
            <div class="filter-bar-header" id="filterBarToggle">
                <span>üîç Filters & Actions</span>
                <span class="toggle-icon">‚ñº</span>
            </div>

            <div class="filter-bar-content" id="filterBarContent">
                <div class="filter-controls">
                    <div class="filter-group">
                        <label>Application</label>
                        <select id="appFilter">
                            <option value="">Select Application...</option>
                        </select>
                    </div>

                    <div class="filter-group">
                        <button id="refreshBtn" class="action-btn primary">
                            üîÑ Refresh Data
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Status Bar -->
        <div id="statusBar" class="status-bar"></div>
        <div id="loadingIndicator" class="loading-indicator" style="display: none;">
            <div class="spinner"></div>
            <span id="loadingText">Loading...</span>
        </div>

        <!-- Main Content Area -->
        <main class="dashboard-content">

            <!-- OVERVIEW TAB -->
            <div id="overview-tab" class="tab-content active">
                <div class="overview-header">
                    <h2>üìä System Overview</h2>
                    <p class="tab-description">Aggregate statistics from both Backend (.NET) and Frontend (JavaScript) analysis</p>
                </div>

                <div class="stats-grid-3col">
                    <div class="stat-card gradient-blue">
                        <div class="stat-header">Backend (.NET)</div>
                        <div class="stat-row">
                            <span class="stat-label">Files:</span>
                            <span class="stat-value" id="overview-backend-files">-</span>
                        </div>
                        <div class="stat-row">
                            <span class="stat-label">Classes:</span>
                            <span class="stat-value" id="overview-backend-classes">-</span>
                        </div>
                        <div class="stat-row">
                            <span class="stat-label">Methods:</span>
                            <span class="stat-value" id="overview-backend-methods">-</span>
                        </div>
                        <div class="stat-row">
                            <span class="stat-label">Coverage:</span>
                            <span class="stat-value" id="overview-backend-coverage">-%</span>
                        </div>
                        <div class="stat-row">
                            <span class="stat-label">Untested:</span>
                            <span class="stat-value warning" id="overview-backend-untested">-</span>
                        </div>
                    </div>

                    <div class="stat-card gradient-yellow">
                        <div class="stat-header">Frontend (JavaScript)</div>
                        <div class="stat-row">
                            <span class="stat-label">Files:</span>
                            <span class="stat-value" id="overview-frontend-files">-</span>
                        </div>
                        <div class="stat-row">
                            <span class="stat-label">Components:</span>
                            <span class="stat-value" id="overview-frontend-components">-</span>
                        </div>
                        <div class="stat-row">
                            <span class="stat-label">Functions:</span>
                            <span class="stat-value" id="overview-frontend-functions">-</span>
                        </div>
                        <div class="stat-row">
                            <span class="stat-label">Coverage:</span>
                            <span class="stat-value" id="overview-frontend-coverage">-%</span>
                        </div>
                        <div class="stat-row">
                            <span class="stat-label">Untested:</span>
                            <span class="stat-value warning" id="overview-frontend-untested">-</span>
                        </div>
                    </div>

                    <div class="stat-card gradient-green">
                        <div class="stat-header">Combined Totals</div>
                        <div class="stat-row">
                            <span class="stat-label">Total Files:</span>
                            <span class="stat-value" id="overview-combined-files">-</span>
                        </div>
                        <div class="stat-row">
                            <span class="stat-label">Code Units:</span>
                            <span class="stat-value" id="overview-combined-units">-</span>
                        </div>
                        <div class="stat-row">
                            <span class="stat-label">Avg Coverage:</span>
                            <span class="stat-value" id="overview-combined-coverage">-%</span>
                        </div>
                        <div class="stat-row">
                            <span class="stat-label">Total Untested:</span>
                            <span class="stat-value warning" id="overview-combined-untested">-</span>
                        </div>
                    </div>
                </div>

                <div class="panel mt-20">
                    <h3>Coverage Distribution</h3>
                    <div class="coverage-bars">
                        <div class="coverage-bar-item">
                            <div class="coverage-bar-label">Backend (.NET)</div>
                            <div class="coverage-bar-container">
                                <div class="coverage-bar-fill" id="overview-backend-bar" style="width: 0%"></div>
                                <div class="coverage-bar-text" id="overview-backend-bar-text">0%</div>
                            </div>
                        </div>
                        <div class="coverage-bar-item">
                            <div class="coverage-bar-label">Frontend (JavaScript)</div>
                            <div class="coverage-bar-container">
                                <div class="coverage-bar-fill" id="overview-frontend-bar" style="width: 0%"></div>
                                <div class="coverage-bar-text" id="overview-frontend-bar-text">0%</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- BACKEND TAB -->
            <div id="backend-tab" class="tab-content">
                <div class="tab-header">
                    <h2>üî∑ Backend (.NET) Analysis</h2>
                    <p class="tab-description">C# code structure, xUnit/NUnit/MSTest coverage</p>
                </div>

                <div class="metrics-grid">
                    <div class="metric-card gradient-blue">
                        <div class="metric-value" id="backend-files">-</div>
                        <div class="metric-label">Files</div>
                    </div>
                    <div class="metric-card gradient-green">
                        <div class="metric-value" id="backend-classes">-</div>
                        <div class="metric-label">Classes</div>
                    </div>
                    <div class="metric-card gradient-purple">
                        <div class="metric-value" id="backend-methods">-</div>
                        <div class="metric-label">Methods</div>
                    </div>
                    <div class="metric-card gradient-orange">
                        <div class="metric-value" id="backend-coverage">-%</div>
                        <div class="metric-label">Coverage</div>
                    </div>
                </div>

                <div class="panel mt-20">
                    <h3>Backend Files</h3>
                    <div class="table-container">
                        <table class="data-table" id="backend-files-table">
                            <thead>
                                <tr>
                                    <th>File</th>
                                    <th>Classes</th>
                                    <th>Methods</th>
                                    <th>Avg Complexity</th>
                                    <th>Coverage</th>
                                </tr>
                            </thead>
                            <tbody id="backend-files-tbody">
                                <tr><td colspan="5" class="no-data">No data available</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- FRONTEND TAB -->
            <div id="frontend-tab" class="tab-content">
                <div class="tab-header">
                    <h2>üü® Frontend (JavaScript) Analysis</h2>
                    <p class="tab-description">React/Vue components, TypeScript, Jest/Vitest coverage</p>
                </div>

                <div class="metrics-grid">
                    <div class="metric-card gradient-yellow">
                        <div class="metric-value" id="frontend-files">-</div>
                        <div class="metric-label">Files</div>
                    </div>
                    <div class="metric-card gradient-blue">
                        <div class="metric-value" id="frontend-components">-</div>
                        <div class="metric-label">Components</div>
                    </div>
                    <div class="metric-card gradient-green">
                        <div class="metric-value" id="frontend-functions">-</div>
                        <div class="metric-label">Functions</div>
                    </div>
                    <div class="metric-card gradient-purple">
                        <div class="metric-value" id="frontend-hooks">-</div>
                        <div class="metric-label">Custom Hooks</div>
                    </div>
                    <div class="metric-card gradient-orange">
                        <div class="metric-value" id="frontend-coverage">-%</div>
                        <div class="metric-label">Coverage</div>
                    </div>
                </div>

                <div class="panel mt-20">
                    <h3>Frontend Components</h3>
                    <div class="table-container">
                        <table class="data-table" id="frontend-components-table">
                            <thead>
                                <tr>
                                    <th>Component</th>
                                    <th>Type</th>
                                    <th>File</th>
                                    <th>Hooks Used</th>
                                    <th>Complexity</th>
                                </tr>
                            </thead>
                            <tbody id="frontend-components-tbody">
                                <tr><td colspan="5" class="no-data">No data available</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="panel mt-20">
                    <h3>Frontend Functions</h3>
                    <div class="table-container">
                        <table class="data-table" id="frontend-functions-table">
                            <thead>
                                <tr>
                                    <th>Function</th>
                                    <th>File</th>
                                    <th>Type</th>
                                    <th>Complexity</th>
                                    <th>Has Tests</th>
                                </tr>
                            </thead>
                            <tbody id="frontend-functions-tbody">
                                <tr><td colspan="5" class="no-data">No data available</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- TEST GAPS TAB -->
            <div id="test-gaps-tab" class="tab-content">
                <div class="tab-header">
                    <h2>üîç Test Gaps Analysis</h2>
                    <p class="tab-description">Untested methods, partial coverage, missing negative tests</p>
                </div>

                <div class="metrics-grid">
                    <div class="metric-card gradient-red">
                        <div class="metric-value" id="gaps-untested">-</div>
                        <div class="metric-label">Untested</div>
                    </div>
                    <div class="metric-card gradient-orange">
                        <div class="metric-value" id="gaps-partial">-</div>
                        <div class="metric-label">Partial Coverage</div>
                    </div>
                    <div class="metric-card gradient-yellow">
                        <div class="metric-value" id="gaps-negative">-</div>
                        <div class="metric-label">Missing Negative Tests</div>
                    </div>
                </div>

                <div class="panel mt-20">
                    <h3>Untested Methods & Functions</h3>
                    <div class="table-container">
                        <table class="data-table" id="gaps-untested-table">
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>File</th>
                                    <th>Type</th>
                                    <th>Complexity</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody id="gaps-untested-tbody">
                                <tr><td colspan="5" class="no-data">No data available</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

        </main>
    </div>

    <script type="module" src="script.js"></script>
</body>
</html>
